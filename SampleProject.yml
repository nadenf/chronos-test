title: Project One3
description: Sample project to test the deployment functionality.
author:
  name: Michael Thomson
  email: michaelthomson@nbnco.com.au

parameters:
  debug: false
  glue_database_name: assn_env_telemetry
  impairement_location:
  thresholds:
    bridge_tap: 0.995
    others: 1.0

repositories:
  - name: project_one
    git:
      url: https://git.nbnco.net.au/analytics/one.git
      username: michaelthomson
      password: password
      branch: master
      tag: 0.4

containers:
  - name: database
    docker:
      image: mysql:mysql

  - name: webapp
    scala:
      repository: project_one
      path: projects/one
      sbt:
        file: build.sbt
        memory: 4g
    strategy: recreate
    expose:
      port: 5000

  - name: webapp2
    buildpack:
      repository: project_one
      path: projects/one
    expose:
      port: 5000

  - name: monitoring
    docker:
      repository: project_one
      path: projects/one
    dependencies:
      - database
      - webapp
    strategy: recreate
    expose:
      port: 5000

workflow:
  tasks:
    - launch_container:
      name: webapp
      strategy: recreate
      expose:
        port: 5000

    - launch_container:
      name: database
      strategy: recreate
      expose:
        port: 9000

    - sagemaker_batch:


    - sagemaker_endpoint:

  notifications:
    - name: wait-for-queue
      slack:
        channel: topic-arn
        events:
          - publish

  triggers:
    - name: wait-for-sns
      sns:
        topic: topic-arn
        port: 9200
        url: http;//myfakeure
